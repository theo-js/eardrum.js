!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("eardrum",[],t):"object"==typeof exports?exports.eardrum=t():e.eardrum=t()}(this,(function(){return(()=>{"use strict";var e={766:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(607),o=r(165),i=r(804),a=function e(){this.Eardrum=e,this.EardrumRef=i.default,this.refs=[],this.lastWatched={current:null},this.watch=n.default.bind(this),this.reset=o.default.bind(this)};t.default=a},804:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(488),o=function(e){var t=this,r=e.handler,o=e.eventType,i=e.options,a=e.object,s=e.property,u=e.target,d=e.eardrumInstanceRefs;this.eject=function(){var e=(0,n.isNodeEnv)()?"removeListener":"removeEventListener";t.target[e](t.eventType,t.handler,t.options);for(var r=0;r<t.eardrumInstanceRefs.length;r++)if(t.eardrumInstanceRefs[r]===t)return t.eardrumInstanceRefs.splice(r,1),!0;return!1},this.handler=r,this.eventType=o,this.options=i,this.object=a,this.property=s,this.target=u,this.eardrumInstanceRefs=d};t.default=o},165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(488);t.default=function(){try{var e=(0,n.isNodeEnv)()?"removeListener":"removeEventListener";this.refs.forEach((function(t){t.target[e](t.eventType,t.handler,t.options)}));try{(0,n.emptyArray)(this.refs),this.lastWatched.current=null}catch(e){return!1}return!0}catch(e){return!1}}},488:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfPropIsNotConfigurable=t.emptyArray=t.isEventTargetOrEmitter=t.isEardrumSupportedObject=t.isFunction=t.isNodeEnv=t.createPrivatePropName=void 0;t.createPrivatePropName=function(e){if("symbol"==typeof e)return Symbol();if("string"==typeof e)return"_"+e;throw new Error("Eardrum does not support property keys of type "+typeof e)};t.isNodeEnv=function(){return"undefined"==typeof window};t.isFunction=function(e){return"[object Function]"===toString.call(e)};t.isEardrumSupportedObject=function(e){return"[object Object]"===toString.call(e)};t.isEventTargetOrEmitter=function(e){return!!e&&("function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener||"function"==typeof e.addListener&&"function"==typeof e.removeListener)};t.emptyArray=function(e){if("number"!=typeof e.length||"function"!=typeof e.pop||!Array.isArray(e))throw new Error("Invalid argument passed to emptyArray: argument should be an array");for(;e.length>0;)e.pop()};t.throwIfPropIsNotConfigurable=function(e,t){var r=e.object,n=e.key;"string"!=typeof t&&(t="Error: property '"+n.toString()+"' is not configurable");var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o&&!o.configurable)throw new Error(t);return o}},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(875),o=r(811),i=r(488);t.default=function(e){var t,r=(0,n.default)(e),a=r.object,s=r.property,u=r.value,d=r.handler,f=o.installListener.bind(this,r),c=o.ejectListener.bind(this,r),p=(0,i.createPrivatePropName)(s);this.lastWatched.current=a,(0,i.isFunction)(d)&&f(),Object.defineProperties(a,((t={})[p]={value:void 0===u?a[s]:u,writable:!0,configurable:!0,enumerable:!1},t[s]={get:function(){return this[p]},set:function(e){c(),this[p]=e,(0,i.isFunction)(e)&&f()},configurable:!0,enumerable:!0},t))}},811:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ejectListener=t.installListener=void 0;var o=r(804),i=r(488);function a(e){var t=this,r=e.attach,a=e.attachMethodName,s=e.detachMethodName,u=e.object,d=e.property,f=e.listener,c=e.handler,p=e.listenerRemovalCondition,l=e.additionalRefProps,h=f.target,v=f.options,y=h,b=f.type;if(!y[a]||!y[s])throw new Error("Event target is invalid");if(r){y[a](b,c,v);var m={handler:c,eventType:b,options:v,object:u,property:d,target:y,eardrumInstanceRefs:this.refs};(0,i.isEardrumSupportedObject)(l)&&(m=n(n({},l),m));var g=new o.default(m);this.refs.push(g)}else{this.refs.filter((function(e,r,n){var o;return(o="function"!=typeof p||p(e,r,n))&&t.refs.splice(r,1),o})).forEach((function(e){y[s](b,e.handler,e.options)}))}}function s(e,t){var r,o,s,u=t.handler,d=t.listener,f=t.additionalRefProps,c=d,p=c.type,l=c.target,h=u,v=l;if((0,i.isNodeEnv)())(0,i.isEventTargetOrEmitter)(v)||(v=process),o="addListener",s="removeListener",r=function(e){h(e,t)};else{if("undefined"==typeof window)throw new Error("This environment does not support eardrum.js");(0,i.isEventTargetOrEmitter)(v)||(v=window),o="addEventListener",s="removeEventListener",r=function(e){h(e,t)}}a.bind(this,n(n({},t),{handler:r,listener:n(n({},c),{target:v,type:p||""}),additionalRefProps:f,attachMethodName:o,detachMethodName:s,attach:e}))()}t.installListener=function(e){s.bind(this,!0,e)()},t.ejectListener=function(e){s.bind(this,!1,e)()}},875:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(488);t.default=function(e){var t=e.object,r=e.property,i=e.handler,a=e.additionalRefProps,s=void 0===a?{}:a,u=e.listener,d=void 0===u?{type:"",target:void 0,options:void 0}:u;if(!(0,o.isEardrumSupportedObject)(t))throw new Error("Eardrum does not support this object");return(0,o.throwIfPropIsNotConfigurable)({object:t,key:r},"Eardrum cannot watch property "+r.toString()+" of provided object because it is not configurable"),void 0===i&&(0,o.isFunction)(t[r])&&(i=t[r],e.handler=i),n(n({},e),{object:t,property:r,handler:i,additionalRefProps:s,listener:d})}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}var n={};return(()=>{var e=n;var t=r(766);e.default=new t.default})(),n=n.default})()}));
//# sourceMappingURL=eardrum.js.map