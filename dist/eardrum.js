!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("eardrum",[],t):"object"==typeof exports?exports.eardrum=t():e.eardrum=t()}(this,(function(){return(()=>{"use strict";var e={772:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(687),o=r(657),i=r(676),a=r(488);t.default=function(e){var t,r=(0,o.default)(e),u=r.object,s=r.property,c=r.value,d=r.handler,f=(0,a.createPrivatePropName)(s);n.lastConfiguredObject.current=u,(0,a.isFunction)(d)&&(0,i.installListener)(r),Object.defineProperties(u,((t={})[f]={value:void 0===c?u[s]:c,writable:!0,configurable:!0,enumerable:!1},t[s]={get:function(){return this[f]},set:function(e){(0,i.ejectListener)(r),this[f]=e,(0,a.isFunction)(e)&&(0,i.installListener)(r)},configurable:!0,enumerable:!0},t))}},676:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ejectListener=t.installListener=void 0;var o=r(687),i=r(488);function a(e,t){t.object;var r,a,u,s=t.handler,c=t.listener,d=t.additionalRefProps,f=c,l=f.type,p=f.target,v=s,y=p;if((0,i.isNodeEnv)())(0,i.isEventTargetOrEmitter)(y)||(y=process),a="addListener",u="removeListener",r=function(e){v(e,t)};else{if("undefined"==typeof window)throw new Error("This environment does not support eardrum.js");(0,i.isEventTargetOrEmitter)(y)||(y=window),a="addEventListener",u="removeEventListener",r=function(e){v(e,t)}}!function(e){var t=e.attach,r=e.attachMethodName,a=e.detachMethodName,u=e.object,s=e.listener,c=e.handler,d=e.listenerRemovalCondition,f=e.additionalRefProps,l=s.target,p=s.options,v=l,y=s.type;if(!v[r]||!v[a])throw new Error("Event target is invalid");if(t){v[r](y,c,p);var h={handler:c,eventType:y,options:p,object:u,target:v};(0,i.isEardrumSupportedObject)(f)&&(h=n(n({},f),h)),o.handlerReferences.push(h)}else o.handlerReferences.filter((function(e,t,r){var n;return(n="function"!=typeof d||d(e,t,r))&&o.handlerReferences.splice(t,1),n})).forEach((function(e){v[a](y,e.handler,e.options)}))}(n(n({},t),{handler:r,listener:n(n({},f),{target:y,type:l||""}),additionalRefProps:d,attachMethodName:a,detachMethodName:u,attach:e}))}t.installListener=function(e){a(!0,e)},t.ejectListener=function(e){a(!1,e)}},657:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(488);t.default=function(e){var t=e.object,r=e.property,i=e.handler,a=e.additionalRefProps,u=void 0===a?{}:a,s=e.listener,c=void 0===s?{type:"",target:void 0,options:void 0}:s;if(!(0,o.isEardrumSupportedObject)(t))throw new Error("Eardrum does not support this object");return(0,o.throwIfPropIsNotConfigurable)({object:t,key:r},"Eardrum cannot configure property "+r.toString()+" of provided object because it is not configurable"),void 0===i&&(0,o.isFunction)(t[r])&&(i=t[r],e.handler=i),n(n({},e),{object:t,property:r,handler:i,additionalRefProps:u,listener:c})}},165:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetStoredValues=void 0;var n=r(687),o=r(488);t.resetStoredValues=function(){try{return(0,o.emptyArray)(n.handlerReferences),n.lastConfiguredObject.current=null,!0}catch(e){return!1}},t.default=function(){try{var e=(0,o.isNodeEnv)()?"removeListener":"removeEventListener";return n.handlerReferences.forEach((function(t){t.target[e](t.eventType,t.handler,t.options)})),(0,t.resetStoredValues)(),!0}catch(e){return!1}}},687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lastConfiguredObject=t.handlerReferences=void 0;t.handlerReferences=[];t.lastConfiguredObject={current:null}},488:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwIfPropIsNotConfigurable=t.emptyArray=t.isEventTargetOrEmitter=t.isEardrumSupportedObject=t.isFunction=t.isNodeEnv=t.createPrivatePropName=void 0;t.createPrivatePropName=function(e){if("number"==typeof e)throw new Error("Eardrum does not support property keys of type number");return"symbol"==typeof e?Symbol():"_"+e};t.isNodeEnv=function(){return"undefined"==typeof window};t.isFunction=function(e){return"[object Function]"===toString.call(e)};t.isEardrumSupportedObject=function(e){return"[object Object]"===toString.call(e)};t.isEventTargetOrEmitter=function(e){return!!e&&("function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener||"function"==typeof e.addListener&&"function"==typeof e.removeListener)};t.emptyArray=function(e){if("number"!=typeof e.length||"function"!=typeof e.pop||!Array.isArray(e))throw new Error("Invalid argument passed to emptyArray: argument should be an array");for(;e.length>0;)e.pop()};t.throwIfPropIsNotConfigurable=function(e,t){var r=e.object,n=e.key;"string"!=typeof t&&(t="Error: property '"+n.toString()+"' is not configurable");var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o&&!o.configurable)throw new Error(t);return o}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}var n={};return(()=>{var e=n;var t=r(772),o=r(165),i={configure:t.default,reset:o.default};e.default=i})(),n=n.default})()}));
//# sourceMappingURL=eardrum.js.map